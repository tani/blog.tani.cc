---
title: 【MLG60発表報告】ランベック計算に循環証明を導入する試み
description: |
  数理論理学の集会（MLG60）での発表内容を基に、ランベック計算への循環証明の導入とその形式言語理論的な含意について、定義や証明図を交えて解説します。
---

# 【MLG60発表報告】ランベック計算に循環証明を導入する試み：体系 Lμ の提案

**投稿者:** 谷口雅弥 (理化学研究所)
**日付:** 2025年12月19日

---

2025年12月19日、数理論理学の集会であるMLG60にて、「ランベック計算の循環証明体系 $L\mu$ の試み」というタイトルで発表を行いました。本記事では、その発表内容を振り返りつつ、ランベック計算 (Lambek Calculus) という言語学的な動機を持つ論理体系に 循環証明 (Cyclic Proof) を導入することで何が見えてくるのか、そしてそれが形式言語理論（オートマトンと言語の理論）においてどのような意味を持つのかについて解説します。

### 背景と動機：論理と形式言語の階層構造

なぜ今、ランベック計算なのでしょうか？ その背景には、論理体系と形式言語のクラス（チョムスキー階層）の間に見出されている、非常に綺麗な対応関係があります。近年、以下のような階層構造が整理されつつあります。

通常の Lambek Calculus ($L$) は文脈自由文法 (CFG) と等価であり、論理式の深さを制限した Shallow Lambek Calculus は線形文法 (Linear Grammar) に対応します。さらに、演算子を一方に制限した Simplified Shallow Lambek は正規文法 (Regular Grammar) に対応することが知られています。このように、論理側の制約を強めることで、対応する文法クラスの計算能力も制限されていくという図式があるのです。本研究の目的は、この図式に「循環（サイクル）」、すなわち無限の証明構造を導入した $\mu$-Lambek calculus ($L\mu$) を加えることで、この階層がどう拡張されるのかを探ることにあります。

まずは、基礎となるランベック計算について簡単に振り返っておきましょう。これは1958年に Joachim Lambek によって提唱されたもので、自然言語の統語論（Syntax）を証明論の枠組みで捉えようとする試みです。この論理の最大の特徴は、交換則・弱化則・縮約則を持たないという点にあります。つまり、命題（単語）の「順番」と「個数」を厳密に管理するのです。原子論理式（$\alpha$）からなる論理式の集合は、以下のように帰納的に定義されます。ここで、$A \backslash B$ は「左に $A$ を取って $B$ になる型」を、$A / B$ は「右に $B$ を取って $A$ になる型」を表します。

$$\varphi \coloneqq \varphi / \varphi \mid \varphi \backslash \varphi \mid \alpha$$

推論規則としては、以下のような公理、カット、および論理規則（$\backslash L, \backslash R, / L, / R$）を持ちます。

$$
\begin{prooftree}
\AxiomC{\(\Gamma \Rightarrow \alpha\)}
\AxiomC{\(\Delta, \beta, \Sigma \Rightarrow \gamma\)}
\RightLabel{\((\backslash L)\)}
\BinaryInfC{\(\Delta, \Gamma, \alpha \backslash \beta, \Sigma \Rightarrow \gamma\)}
\end{prooftree}
\qquad
\begin{prooftree}
\AxiomC{\( \alpha, \Gamma \Rightarrow \beta \)}
\RightLabel{\( (\backslash R) \)}
\UnaryInfC{\( \Gamma \Rightarrow \alpha \backslash \beta \)}
\end{prooftree}
$$

$$
\begin{prooftree}
\AxiomC{\(\Gamma \Rightarrow \alpha\)}
\AxiomC{\(\Delta, \beta, \Sigma \Rightarrow \gamma\)}
\RightLabel{\( (/ L)\)}
\BinaryInfC{\(\Delta, \beta / \alpha, \Gamma, \Sigma \Rightarrow \gamma\)}
\end{prooftree}
\qquad
\begin{prooftree}
\AxiomC{\(\Gamma, \alpha \Rightarrow \beta\)}
\RightLabel{\( (/ R)\)}
\UnaryInfC{\(\Gamma \Rightarrow \beta / \alpha\)}
\end{prooftree}
$$

具体的な解析例として、「Alice runs」という文を考えてみましょう。Aliceを $np$（名詞句）、runsを $np \backslash s$（左に $np$ を取って文 $s$ になる）と設定すると、文全体の正しさは以下の証明図によって保証されます。

$$
\begin{prooftree}
\AxiomC{\(np \Rightarrow np\)}
\AxiomC{\(s \Rightarrow s\)}
\RightLabel{\( (\backslash L) \)}
\BinaryInfC{\(np, np \backslash s \Rightarrow s\)}
\end{prooftree}
$$

逆に、「runs Alice」という語順では、シーケントが $np \backslash s, np \Rightarrow s$ となり、証明ができず「非文」として弾かれます。

### 提案体系 $L\mu$ と循環証明の導入

さて、ここからが本題です。従来のランベック計算は有限の証明木しか持ちませんでしたが、ここに 循環証明 (Cyclic Proof) の枠組みを導入します。循環証明とは、証明木の中にループ（バックリンク）を許容することで、無限に続く証明構造を有限のグラフとして表現する手法です。今回提案する体系 $L\mu$ では、通常のランベック計算に、再帰的な定義を扱うための 最小不動点 ($\mu$) と、文脈に応じた選択（分岐）を行うための 加法的連言 ($\land$) を追加しました。

$$\varphi \coloneqq \varphi / \varphi \mid \varphi \backslash \varphi \mid \varphi \land \varphi \mid \mu X.\varphi_X \mid \alpha$$

これに伴い、不動点を展開するための規則（$\mu L, \mu R$）や、選択を行うための規則（$\land L, \land R$）が追加されます。

$$
\begin{prooftree}
\AxiomC{\(\Gamma, \alpha[\mu X.\alpha / X], \Delta \Rightarrow \gamma\)}
\RightLabel{\((\mu L)\)}
\UnaryInfC{\(\Gamma, \mu X.\alpha, \Delta \Rightarrow \gamma\)}
\end{prooftree}
\qquad
\begin{prooftree}
\AxiomC{\(\Gamma \Rightarrow \alpha[\mu X.\alpha / X]\)}
\RightLabel{\((\mu R)\)}
\UnaryInfC{\(\Gamma \Rightarrow \mu X.\alpha\)}
\end{prooftree}
$$

$$
\begin{prooftree}
\AxiomC{\(\Gamma, \alpha_i, \Delta \Rightarrow \gamma\)}
\RightLabel{\((\land L_i)\)}
\UnaryInfC{\(\Gamma, \alpha_1 \land \alpha_2, \Delta \Rightarrow \gamma\)}
\end{prooftree}
\qquad
\begin{prooftree}
\AxiomC{\(\Gamma \Rightarrow \alpha\)}
\AxiomC{\(\Gamma \Rightarrow \beta\)}
\RightLabel{\((\land R)\)}
\BinaryInfC{\(\Gamma \Rightarrow \alpha \land \beta\)}
\end{prooftree}
$$

ただし、無制限にループを許すと論理が崩壊してしまうため、大域的トレース条件 (Global Trace Condition: GTC) という制約を課します。これは、「すべての無限パス $\pi$ に対して、そのパス上で左辺にある最小不動点 $\mu$ が無限回展開 (unfold) されるようなトレースが存在しなければならない」というものです。直感的には、再帰的な定義（$\mu$）が無限に展開される際に、その構造が適切に消費・分解されていることを保証しています。

この拡張によって、言語モデルとしての表現力がどのように向上するのでしょうか。一つの面白い応用例として、一般化された等位接続 (Generalized AND) の表現が挙げられます。自然言語の "and" は、「A and B」のように2つを繋ぐこともあれば、「A, B and C」のように3つ以上を繋ぐこともあります。これらを有限個の型で統一的に扱うことは従来困難でした。しかし、$L\mu$ では、再帰 ($\mu$) と選択 ($\land$) を組み合わせることで、これを解決できます。

型を $\chi \equiv (\mu Y. Y \land X)$ および $\tau_{and} \equiv (\mu Y. (X \backslash X) \land (X \backslash Y)) / X$ と定義し、これらを証明図に起こすと、以下のように「継続 (Cont) するか、終了 (Stop) するか」を $\land$ で選びながら、スタックされた $X$ を順次消費していくオートマトンのような挙動を論理式として記述できるのです。

$$
\begin{prooftree}
\AxiomC{\(\chi, \tau_{and}, X \Rightarrow X\) \quad \scriptsize{(Backlink)}}
\AxiomC{\(X \Rightarrow X\)}
\RightLabel{\( (\backslash L) \)}
\BinaryInfC{\(\chi, X, (X \backslash \tau_{and}), X \Rightarrow X\)}
\RightLabel{\( (\land L_2) \)}
\UnaryInfC{\(\chi \land X, (X \backslash \tau_{and}), X \Rightarrow X\)}
\RightLabel{\( (\mu L) \)}
\UnaryInfC{\(\chi, (X \backslash X) \land (X \backslash \tau_{and}), X \Rightarrow X\)}
\RightLabel{\( (\mu L) \)}
\UnaryInfC{\(\chi, \tau_{and}, X \Rightarrow X\)}
\end{prooftree}
$$

また、オリジナルのランベック計算には否定や矛盾といった概念が希薄ですが、$L\mu$ では「終わらない再帰」として矛盾 $\bot \equiv \mu X. X$ を自然に定義できます。左辺にこれがあると、証明図の中で無限に展開し続けることができるため、GTCを満たしつつ任意の命題を導出（爆発）させることができます。

$$
\begin{prooftree}
\AxiomC{\( \bot \Rightarrow \varphi \quad \scriptsize{(Backlink)}\)}
\RightLabel{\( (\mu L) \)}
\UnaryInfC{\( \bot \Rightarrow \varphi\)}
\end{prooftree}
$$

### 結びに代えて：今後の展望

最後に、この $L\mu$ が形式言語理論のどのクラスに対応するかという議論ですが、私の予想 (Conjecture) は、「循環証明を入れても、言語クラスは文脈自由言語 (CFL) のまま変わらない」 というものです。その根拠として、縮約則がないため計算リソースを勝手に増やせないこと、交換則がないため文脈自由文法を超えるような複雑な交差依存関係を作れないこと、そしてGTCにより有限ステップでの停止が保証されることが挙げられます。

今回は「最小不動点 $\mu$」に焦点を当てましたが、その双対である「最大不動点 $\nu$」を導入すると、さらに世界が広がります。$\mu$ が「有限で終わること」を要請するのに対し、$\nu$ は「無限に続くこと」を許容します。これを導入すれば、無限に続くストリームデータ $a^\omega$ などを解析する型システムとしてのランベック計算 ($L\mu\nu$) が構築できるかもしれません。

$$
\begin{prooftree}
\AxiomC{\(\Gamma, \alpha[\nu X.\alpha / X], \Delta \Rightarrow \gamma\)}
\RightLabel{\( (\nu L) \)}
\UnaryInfC{\(\Gamma, \nu X.\alpha, \Delta \Rightarrow \gamma\)}
\end{prooftree}
\qquad
\begin{prooftree}
\AxiomC{\(\Gamma \Rightarrow \alpha[\nu X.\alpha / X]\)}
\RightLabel{\( (\nu R) \)}
\UnaryInfC{\(\Gamma \Rightarrow \nu X.\alpha\)}
\end{prooftree}
$$
